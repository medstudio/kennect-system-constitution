<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating new journey (walkthrough) | Hello Kennector</title>
    <meta name="description" content="Let&#39;s start playing around">
    <link rel="icon" type="image/png" sizes="64x64" href="/assets/favicon.png">
  <link rel="shortcut icon" type="image/png" sizes="64x64" href="/assets/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.8eb0d87d.css" as="style"><link rel="preload" href="/assets/js/app.409bad63.js" as="script"><link rel="preload" href="/assets/js/4.931a76fd.js" as="script"><link rel="prefetch" href="/assets/js/10.4d448ecd.js"><link rel="prefetch" href="/assets/js/11.c58d4a40.js"><link rel="prefetch" href="/assets/js/12.12ef2798.js"><link rel="prefetch" href="/assets/js/13.839d4ad7.js"><link rel="prefetch" href="/assets/js/14.84664bd3.js"><link rel="prefetch" href="/assets/js/15.334b5b7d.js"><link rel="prefetch" href="/assets/js/16.9188ed4d.js"><link rel="prefetch" href="/assets/js/17.09765858.js"><link rel="prefetch" href="/assets/js/18.09050abf.js"><link rel="prefetch" href="/assets/js/19.328b130b.js"><link rel="prefetch" href="/assets/js/2.7b21ce08.js"><link rel="prefetch" href="/assets/js/20.229d4fa9.js"><link rel="prefetch" href="/assets/js/21.b6d146db.js"><link rel="prefetch" href="/assets/js/22.bbcb1a69.js"><link rel="prefetch" href="/assets/js/23.2cc4e2fc.js"><link rel="prefetch" href="/assets/js/24.33ff386c.js"><link rel="prefetch" href="/assets/js/25.53e9781b.js"><link rel="prefetch" href="/assets/js/3.5a3439f9.js"><link rel="prefetch" href="/assets/js/5.4e2036ee.js"><link rel="prefetch" href="/assets/js/6.8495fe17.js"><link rel="prefetch" href="/assets/js/7.e3a938be.js"><link rel="prefetch" href="/assets/js/8.49181e46.js"><link rel="prefetch" href="/assets/js/9.3262212b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8eb0d87d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Hello Kennector</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Home</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Liteweight Business Intellegence</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Forms, Surveys &amp; Quizes</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Journeys</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/journeys/overview.html" aria-current="page" class="active sidebar-link">Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/journeys/overview.html#steps" class="sidebar-link">STEPS</a></li><li class="sidebar-sub-header"><a href="/journeys/overview.html#_1-manifest-json" class="sidebar-link">1. MANIFEST.JSON</a></li><li class="sidebar-sub-header"><a href="/journeys/overview.html#_2-process-js" class="sidebar-link">2. PROCESS.JS</a></li><li class="sidebar-sub-header"><a href="/journeys/overview.html#_3-pushing-the-journey" class="sidebar-link">3. PUSHING THE JOURNEY</a></li><li class="sidebar-sub-header"><a href="/journeys/overview.html#_3-generate-params-js" class="sidebar-link">3. GENERATE-PARAMS.JS</a></li></ul></li><li><a href="/journeys/manifest.html" class="sidebar-link">Writing Manifests for Journeys</a></li><li><a href="/journeys/formulas.html" class="sidebar-link">Using Formulas In Journeys</a></li><li><a href="/journeys/storage.html" class="sidebar-link">Writing Other Storage Targets in Manifests</a></li><li><a href="/journeys/inputConfig.html" class="sidebar-link">InputConfig in Manifests</a></li><li><a href="/journeys/dependencies.html" class="sidebar-link">Dependencies in Manifests</a></li><li><a href="/journeys/outputCollectionsNames.html" class="sidebar-link">Output Collections Names in Manifests</a></li><li><a href="/journeys/validators.html" class="sidebar-link">Validators in Manifests</a></li><li><a href="/journeys/masterDataMap.html" class="sidebar-link">MasterDataMap</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Data Warehouse &amp; Reports</span> <span class="arrow right"></span></p> <!----></div></li><li><a href="/contact.html" class="sidebar-link">Contact us</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="creating-new-journey-walkthrough"><a href="#creating-new-journey-walkthrough" class="header-anchor">#</a> Creating new journey (walkthrough)</h1> <p>You can create a journey by creating a folder named xyz in the tenant_name/journies inside the dw-journey-spaces repo. Look for other journies in there to learn.</p> <ol><li><p>Add your public access key to your account</p></li> <li><p>Clone repository:
git clone git@github.com:medstudio/dw-journey-spaces.git</p></li> <li><p>Create some csv files in ur pc and put below data into them. (Please create more data by from your own imagination by changing month and brand and putting imaginary sale numbers, ame imaginary employees)</p></li></ol> <p><code>sales.csv</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    emp_id,brand,month,units,value,target
    e1,Brand_1,Jan-2020,1000,50000,60000
    e1,Brand_2,Jan-2020,1000,50000,60000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>emp_list.csv</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    emp_id,position_code,name
    e1,mumbai1,Sameer Mango
    e2,pune1,Jack Panda
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="steps"><a href="#steps" class="header-anchor">#</a> STEPS</h2> <h2 id="_1-manifest-json"><a href="#_1-manifest-json" class="header-anchor">#</a> 1. <strong>MANIFEST.JSON</strong></h2> <p>Your goal is to Create an automation journey which puts the following data into our system as a collection.</p> <pre><code>For hints, look at /pralok/journeys/ninja_hattori_sales_data_909


a. In the dw-journey-spaces repository, create a Journey test-client-folder

    i. Find the domain of your test client (example: pralok)
    ii. Go into dw-journey-spaces clone in your computer and create a new folder in 
        /pralok/journeys 
        and name the folder with a unique codename, 
        example: sales_automation_155

    iii. Now Create a manifest.json file into this folder and **declare** following stuff 
        name (must match the foldername)
        displayname
        (and many fields as stated in manifest.json of ninja_hattori_sales_data_909 )
    

b. In the journey manifest declare the input files and their expected fields as following
```
    &quot;inputConfig&quot;: [
        {
            &quot;id&quot;: &quot;in_file_emp_list&quot;,
            &quot;name&quot;: &quot;in_file_emp_list&quot;,
            &quot;type&quot;: &quot;file&quot;,
            &quot;fields&quot;: [
                &quot;emp_id&quot;,
                &quot;position_code&quot;,
                &quot;name&quot;
            ],
            &quot;upload&quot;: true,
            &quot;columnParser&quot;: {
                &quot;emp_id&quot;: &quot;string&quot;
            }
        },
         {
            &quot;id&quot;: &quot;in_sales&quot;,
            &quot;name&quot;: &quot;in_sales&quot;,
            &quot;type&quot;: &quot;file&quot;,
            &quot;fields&quot;: [
               &quot;emp_id&quot;,
               &quot;brand&quot;,
               &quot;month&quot;,
               &quot;units&quot;,
               &quot;value&quot;,
               &quot;target&quot;
            ],
            &quot;upload&quot;: true,
            &quot;columnParser&quot;: {
                &quot;emp_id&quot;: &quot;string&quot;,
                &quot;value&quot;: &quot;number&quot;,
                &quot;units&quot;: &quot;number&quot;,
                &quot;target&quot;: &quot;number&quot;
            }
        }
    ],
```
c. Also declare a field in manifest as  ``&quot;outputCollectionNames&quot;`` this tells how/where the result will be stored in the system. (you can have many)

```
    &quot;outputCollectionNames&quot;: [
        &quot;raw_emp_list&quot;,
        &quot;emp_sales_by_month&quot;
    ]
``` 
</code></pre> <h2 id="_2-process-js"><a href="#_2-process-js" class="header-anchor">#</a> 2. <strong>PROCESS.JS</strong></h2> <p>Create a process.js file into this folder and copy following boilerplate</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>

module.exports = async function (formulas, inputParams) {
    return [ 
        // array of all parts of the journey

        async()=&gt;{
            // part 1 of the journey
        },

        async()=&gt;{
            // part 2 of journey 
        }

        // you can have many parts of the journey
        // in each part you can use formulas

    ]
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>now let's use some formulas and transform the data before storing it.
add below lines to first part</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>formulas.addKeysWithFormula(&quot;in_sales&quot;, &quot;raw_emp_list&quot;, [
    { 
        newKeySet: ['created_on','joined_on'], 
        keys: 'row',
        formula: (row)=&gt;{
            return {
                created_on: new Date().toString(),
                joined_on: (row.joined_on? row.joined_on : new Date().toString())
            }
        },  
    },
])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>now let's use some formulas and transform the data before storing it.
add below lines to second part</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>formulas.addKeysWithFormula(&quot;in_file_emp_list&quot;, &quot;emp_sales_by_month&quot;, [
    { 
        newKeySet: ['created_on','joined_on'], 
        keys: 'row',
        formula: (row)=&gt;{
            return {
                created_on: new Date().toString(),
                joined_on: (row.joined_on? row.joined_on : new Date().toString())
            }
        },  
    },
])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Try using some more formulas from <a href="/journeys/formulas.html#formulas-docs">Formulas docs</a></p> <h2 id="_3-pushing-the-journey"><a href="#_3-pushing-the-journey" class="header-anchor">#</a> 3. <strong>PUSHING THE JOURNEY</strong></h2> <p>use git to commit your changes in dw-journey-spaces,
stage the changes, commit them and push</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git add . 
git commit -m &quot;created my first journey&quot;
git push origin master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This will allow you to see the journey in</p> <pre><code>https://dw.prd.kennectweb.com 
</code></pre> <p><code>outputCollectionsNames</code>
is where we declare the names of target collections which are outputs to yhe journeys</p> <p>login with credentials provided to you for test client</p> <p>then click on <code>'Core Data Management'</code> in a sidebar which opens from <code>top left arrow</code>.</p> <p>You will be able to view your journey and invoke it by clicking on <code>view process</code>.</p> <p><img src="/assets/img/j1.90db1afe.png" alt="all core journeys"></p> <p>Upload the files you created into this and run the journey.</p> <p>After the journey is complete, you may connect to the client-database and see the output colelctions and alternatively, by clicking on teh tab named  <code>MANAGE CORE DATA</code>.</p> <p>Verify that you see the latest data uploaded. Try running the journey with a new set of data and check if you see new data in output collections.</p> <h2 id="_3-generate-params-js"><a href="#_3-generate-params-js" class="header-anchor">#</a> 3. <strong>GENERATE-PARAMS.JS</strong></h2> <p>create <code>generateParams.js</code> file in journey folder.</p> <p>it can be use as a pre-processor params if survey config available else as a processParams.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = async (params = {}, utils) =&gt; {
    // utils object, available in this scope, will contain the functions needed to you. such as moment
    return params
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/surveys/me-app.html" class="prev">
          Multi Entry Apps
        </a></span> <span class="next"><a href="/journeys/manifest.html">
          Writing Manifests for Journeys
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.409bad63.js" defer></script><script src="/assets/js/4.931a76fd.js" defer></script>
  </body>
</html>
